

<!-- <h1><span class="mobileView"><i  class="bi bi-arrow-left" (click)="goBack($event)"></i></span> Review</h1> -->
 
<div class="bg">
    <div class="row">
        <div class="col m-2">
            <mat-accordion>
                <mat-expansion-panel hideToggle>
                  
                </mat-expansion-panel>
                <mat-expansion-panel (opened)="panelOpenState = true"
                                     (closed)="panelOpenState = false">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                    Employee list
                    </mat-panel-title> 
                  </mat-expansion-panel-header>   
                  <div class="row">
                    <div class="col-12" *ngFor="let items of manger_info">
                            <!-- <div class="row">
                                <div class="col-6">
                                    <h6 class="card-subtitle">Manager</h6>
                                    <div>{{items.user_role_name}}</div>
                                </div>
                                <div class="col-6">
                                    <h6 class="card-subtitle">Manager Id</h6>
                                    <div>{{items.user_id}}</div>
                                </div>    
                        </div> -->
                       
                          <div class="row p-1">
                          <div class="col-12 card-col" *ngFor="let emp of empInfoList">
                            <mat-card>
                              <h6 class="card-subtitle emp-name">Name : <span>{{emp.first_name }} {{ emp.last_name}}</span></h6>
                              <div class="row">
                                  <div class="col-3">
                                      <h6 class="card-subtitle">Id</h6>
                                      <div>{{emp.user_id}}</div>
                                  </div>
                                  <div class="col-3">
                                      <h6 class="card-subtitle">Email</h6>
                                      <div class="overflow-set">{{emp.email}}</div>
                                  </div>    
                         
                                  <div class="col-3" >
                                      <h6 class="card-subtitle">Contact</h6>
                                      <div>{{emp.phone_no}}</div>
                                  </div>
                                  <div class="col-3">
                                      <h6 class="card-subtitle">Role</h6>
                                      <div>{{emp.user_role_name}}</div>
                                  </div>    
                             </div>
                            </mat-card>
                          </div>
                        </div>
                          
                    </div>
                  </div>
                   
                </mat-expansion-panel>
              </mat-accordion>
              <mat-accordion>
                <mat-expansion-panel hideToggle>
                </mat-expansion-panel>
                <mat-expansion-panel (opened)="panelOpenState = true"
                                     (closed)="panelOpenState = false">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                     Employee leave list
                    </mat-panel-title>
                   
                  </mat-expansion-panel-header>
                  
                  <div class="row">
                    <div class="col" >
                      <mat-tab-group >
                        <mat-tab label="Yet to approve">  
                          <div class="row p-1">
                          
                          <div class="col-12 card-col" *ngFor="let leave of empLeaveList['yet_to_approve']">
                            <div class="row">
                              <div class="col">
                                <h6 class="card-subtitle emp-name">Name : <span>{{leave.first_name}} {{leave.last_name}}</span></h6>
                              </div>
                              <div class="col-7 text-end">
                                <ng-container *ngFor="let access of leaveAccess">
                                <button class="btn-approval" mat-raised-button mat-raised-button *ngIf="access === 'APPROVE'"  (click)="open(leave,'APPROVED')">Approve <i class="bi bi-check-circle-fill"></i></button>
                                <button class="btn-reject" mapprovalat-raised-button mat-raised-button *ngIf="access === 'REJECT'"  (click)="open(leave,'DECLINED')">Reject <i class="bi bi-x-circle"></i></button>  
                              </ng-container>
                              </div>
                            </div>
                              <div class="row">
                                  <div class="col-3" >
                                      <h6 class="card-subtitle">leave Type</h6>
                                      <div>{{leave.leave_title}}</div>
                                  </div>
                                  <div class="col-3">
                                      <h6 class="card-subtitle">From Date</h6>
                                      <div>{{(leave.leaveApplication_from_date *1000 |date : 'dd/MM/yyyy')}}</div>
                                  </div>
                                  <div class="col-3">
                                    <h6 class="card-subtitle">To Date</h6>
                                    <div>{{(leave.leaveApplication_to_date *1000 |date : 'dd/MM/yyyy')}}</div>
                                </div>
                                <div class="col-3">
                                  <h6 class="card-subtitle">Number of days</h6>
                                  <div>{{leave.days}}</div>
                              </div>
                              <div class="col-3">
                                <h6 class="card-subtitle">Leave Balance</h6>
                                <div>{{leave.balance}}</div>
                            </div> 
                            <div class="col-3">
                              <h6 class="card-subtitle">Reason</h6>
                              <div>{{leave.reason}}</div>
                          </div>  
                          <div class="col-3">
                            <h6 class="card-subtitle">Status</h6>
                            <div>{{leave.approved_state}}</div>
                        </div>  
                             </div>
                             <hr/>
                          </div>
                        </div>
                        <div *ngIf="empLeaveList['yet_to_approve']?.length ===0" class="text-center">No records found !!</div>
                      </mat-tab>
                        <mat-tab label="Approved">
                          <div class="col-12 card-col" *ngFor="let leave of empLeaveList['approve']">
                          <div class="row">
                            <div class="col">
                              <h6 class="card-subtitle emp-name">Name : <span>{{leave.first_name}} {{leave.last_name}}</span></h6>
                            </div>
                            <!-- <div class="col-9 text-end">
                            
                              <button mat-raised-button mat-raised-button color="primary" (click)="openDialogue(leave,'APPROVED')">Approve <i class="bi bi-check-circle-fill"></i></button>
                              <button mat-raised-button mat-raised-button color="warn" (click)="openDialogue(leave,'DECLINED')">Reject <i class="bi bi-x-circle"></i></button>  
                            </div> -->
                          </div>
                            <div class="row">
                                <div class="col-3" >
                                    <h6 class="card-subtitle">leave Type</h6>
                                    <div>{{leave.leave_title}}</div>
                                </div>
                                <div class="col-3">
                                    <h6 class="card-subtitle">From Date</h6>
                                    <div>{{(leave.leaveApplication_from_date *1000 |date : 'dd/MM/yyyy')}}</div>
                                </div>
                                <div class="col-3">
                                  <h6 class="card-subtitle">To Date</h6>
                                  <div>{{(leave.leaveApplication_to_date *1000 |date : 'dd/MM/yyyy')}}</div>
                              </div>
                              <div class="col-3">
                                <h6 class="card-subtitle">Number of days</h6>
                                <div>{{leave.days}}</div>
                            </div>
                            <div class="col-3">
                              <h6 class="card-subtitle">Leave Balance</h6>
                              <div>{{leave.balance}}</div>
                          </div> 
                          <div class="col-3">
                            <h6 class="card-subtitle">Reason</h6>
                            <div>{{leave.reason}}</div>
                        </div>  
                        <div class="col-3">
                          <h6 class="card-subtitle">Status</h6>
                          <div>{{leave.approved_state}}</div>
                      </div>  
                           </div>
                           <hr/>
                        </div>
                        <div *ngIf="empLeaveList['approve']?.length ===0" class="text-center">No records found !!</div>
                      </mat-tab>
                        <mat-tab label="Declined">  
                          <div class="col-12 card-col" *ngFor="let leave of empLeaveList['declined']">
                          <div class="row">
                            <div class="col">
                              <h6 class="card-subtitle emp-name">Name : <span>{{leave.first_name}} {{leave.last_name}}</span></h6>
                            </div>
                            <!-- <div class="col-9 text-end">
                              <button mat-raised-button mat-raised-button color="primary" (click)="openDialogue(leave,'APPROVED')">Approve <i class="bi bi-check-circle-fill"></i></button>
                              <button mat-raised-button mat-raised-button color="warn" (click)="openDialogue(leave,'DECLINED')">Reject <i class="bi bi-x-circle"></i></button>  
                            </div> -->
                          </div>
                            <div class="row">
                                <div class="col-3" >
                                    <h6 class="card-subtitle">leave Type</h6>
                                    <div>{{leave.leave_title}}</div>
                                </div>
                                <div class="col-3">
                                    <h6 class="card-subtitle">From Date</h6>
                                    <div>{{(leave.leaveApplication_from_date *1000 |date : 'dd/MM/yyyy')}}</div>
                                </div>
                                <div class="col-3">
                                  <h6 class="card-subtitle">To Date</h6>
                                  <div>{{(leave.leaveApplication_to_date *1000 |date : 'dd/MM/yyyy')}}</div>
                              </div>
                              <div class="col-3">
                                <h6 class="card-subtitle">Number of days</h6>
                                <div>{{leave.days}}</div>
                            </div>
                            <div class="col-3">
                              <h6 class="card-subtitle">Leave Balance</h6>
                              <div>{{leave.balance}}</div>
                          </div> 
                          <div class="col-3">
                            <h6 class="card-subtitle">Reason</h6>
                            <div>{{leave.reason}}</div>
                        </div>  
                        <div class="col-3">
                          <h6 class="card-subtitle">Status</h6>
                          <div>{{leave.approved_state}}</div>
                      </div>  
                           </div>
                          
                           <hr/>
                        </div>
                        <div *ngIf="empLeaveList['declined']?.length ===0" class="text-center">No records found !!</div>
                      </mat-tab>
                      </mat-tab-group>   
                        
                          
                    </div>
                  </div>
                   
                </mat-expansion-panel>
              </mat-accordion>
              <mat-accordion>
                <mat-expansion-panel hideToggle>
                </mat-expansion-panel>
                <mat-expansion-panel (opened)="panelOpenState = true"
                                     (closed)="panelOpenState = false">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                     Employee timesheets
                    </mat-panel-title>
                   
                  </mat-expansion-panel-header>
                  
                  <div class="row">
                    <div class="col-12" >
                      <mat-tab-group >
                        <mat-tab label="Yet to approve">
                          <div class="row p-1">
                            <ng-container *ngFor="let timesheet of timesheet">
                              <div class="col-12 card-col" *ngFor="let time of timesheet['yet_to_approve']">
                               
                                <div class="row">
                                  <div class="col">
                                    <h6 class="card-subtitle emp-name">Name : <span>{{time.first_name}} </span></h6>
                                  </div>
                                  <div class="col-7 text-end">
                                    <ng-container *ngFor="let access of timesheetAccess">
                                    <button class="btn-approval" mat-raised-button mat-raised-button *ngIf="access ==='APPROVE'" (click)="openDialogue(time,'APPROVED')">Approve <i class="bi bi-check-circle-fill"></i></button>
                                    <button class="btn-reject" mat-raised-button mat-raised-button  *ngIf="access ==='REJECT'" (click)="openDialogue(time,'DECLINED')">Reject <i class="bi bi-x-circle"></i></button>  
                                    </ng-container>
                                  </div>
                                </div>
                                  <div class="row">
                                      <div class="col-3" >
                                          <h6 class="card-subtitle">Client</h6>
                                          <div>{{time.client_name}}</div>
                                      </div>
                                      <div class="col-3">
                                        <h6 class="card-subtitle">Project name</h6>
                                        <div>{{time.p_name}}</div>
                                      </div>
                                      <div class="col-3">
                                        <h6 class="card-subtitle">Task name</h6>
                                        <div>{{time.task_worked_list.task_name}}</div>
                                      </div>

                                      <div class="col-3">
                                        <h6 class="card-subtitle">Duration </h6>
                                        <div>[{{(time.p_start_date * 1000) | date : 'dd/MM/YYYY'}}]  TO  [{{(time.p_closure_date * 1000) | date : 'dd/MM/YYYY'}}]</div>
                                    </div>
                                    
                                    <div class="col-3">
                                      <h6 class="card-subtitle">Time</h6>
                                      <div>{{time.time_spent}}</div>
                                  </div>
                                  <div class="col-3">
                                    <h6 class="card-subtitle">Description</h6>
                                    <div>{{time.p_description}}</div>
                                </div> 
                                  <div class="col-3">
                                    <h6 class="card-subtitle">Status</h6>
                                    <div>{{time.approved_state}}</div>
                                </div> 
                                 </div>
                               <hr/>
                              </div>
                            </ng-container> 
                          </div>
                          <div *ngIf="timesheet['yet_to_approve']?.length ===0" class="text-center">No records found !!</div>
                        </mat-tab>
                        <mat-tab label="Approved">
                          <div class="row p-1">
                            <ng-container *ngFor="let timesheet of timesheet">
                              <div class="col-12 card-col" *ngFor="let time of timesheet['approve']">
                                <div class="row">
                                  <div class="col">
                                    <h6 class="card-subtitle emp-name">Name : <span>{{time.first_name}} </span></h6>
                                  </div>
                                   </div>
                                      <div class="row">
                                          <div class="col-3" >
                                              <h6 class="card-subtitle">Client</h6>
                                              <div>{{time.client_name}}</div>
                                          </div>
                                          <div class="col-3">
                                            <h6 class="card-subtitle">Project name</h6>
                                            <div>{{time.p_name}}</div>
                                          </div>
                                          <div class="col-3">
                                            <h6 class="card-subtitle">Task name</h6>
                                            <div>{{time.task_worked_list.task_name}}</div>
                                          </div>
    
                                          <div class="col-3">
                                            <h6 class="card-subtitle">Duration </h6>
                                            <div>[{{(time.p_start_date * 1000) | date : 'dd/MM/YYYY'}}]  TO  [{{(time.p_closure_date * 1000) | date : 'dd/MM/YYYY'}}]</div>
                                        </div>
                                        <div class="col-3">
                                          <h6 class="card-subtitle">Time</h6>
                                          <div>{{time.time_spent}}</div>
                                      </div>
                                      <div class="col-3">
                                        <h6 class="card-subtitle">Description</h6>
                                        <div>{{time.description}}</div>
                                    </div> 
                                    <div class="col-3">
                                      <h6 class="card-subtitle">Status</h6>
                                      <div>{{time.approved_state}}</div>
                                    </div> 
                           
                                 </div>
                                 <hr/>
                              </div>
                            </ng-container>
                           
                          </div>
                          <div *ngIf="timesheet['approve']?.length ===0" class="text-center">No records found !!</div>
                        </mat-tab>
                        <mat-tab label="Declined">
                          <div class="row p-1">
                            <ng-container *ngFor="let timesheet of timesheet">
                              <div class="col-12 card-col" *ngFor="let time of timesheet['declined']">
                                <div class="row">
                                  <div class="col">
                                    <h6 class="card-subtitle emp-name">Name : <span>{{time.first_name}} </span></h6>
                                  </div>
                                </div>
                                  <div class="row">
                                      <div class="col-3" >
                                          <h6 class="card-subtitle">Client</h6>
                                          <div>{{time.client_name}}</div>
                                      </div>
                                      <div class="col-3">
                                        <h6 class="card-subtitle">Project name</h6>
                                        <div>{{time.p_name}}</div>
                                      </div>
                                      <div class="col-3">
                                        <h6 class="card-subtitle">Task name</h6>
                                        <div>{{time.task_worked_list.task_name}}</div>
                                      </div>

                                      <div class="col-3">
                                        <h6 class="card-subtitle">Duration </h6>
                                        <div>[{{(time.p_start_date * 1000) | date : 'dd/MM/YYYY'}}]  TO  [{{(time.p_closure_date * 1000) | date : 'dd/MM/YYYY'}}]</div>
                                    </div>
                                    <div class="col-3">
                                      <h6 class="card-subtitle">Time</h6>
                                      <div>{{time.time_spent}}</div>
                                  </div>
                                  <div class="col-3">
                                    <h6 class="card-subtitle">Description</h6>
                                    <div>{{time.description}}</div>
                                </div> 
                                  <div class="col-3">
                                    <h6 class="card-subtitle">Status</h6>
                                    <div>{{time.approved_state}}</div>
                                </div> 
                                 </div>
                                 <hr/>
                              </div>
                            </ng-container>
                            
                          </div>
                          <div *ngIf="timesheet['declined']?.length ===0" class="text-center">No records found !!</div>
                        </mat-tab> 
                        </mat-tab-group>
                       
                    </div>
                  </div>
                   
                </mat-expansion-panel>
              </mat-accordion> 
        </div>
    </div>
</div> 
